<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HITL Protocols: Cognitive Interface Proposal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Chosen Palette: Warm Intellectual (Stone/Neutral with Amber/Slate accents) -->
    <!-- Application Structure Plan: 
         1. Overview: Defines the HITL Protocol approach.
         2. Cognitive Impact: Analysis of human system strain.
         3. HITL Protocols: The service framework (Reflexive/Intentional/Strategic).
         4. Data Repo: Dedicated tab for isolated data patterns (Roles, Vigilance, Agency).
         5. Proposal: The specific pitch to Newcastle City Council with updated strategic quote.
    -->
    <!-- Visualization & Content Choices:
         - Stacked Area Chart: To show role transformation (not replacement).
         - Scatter Plot: To show the correlation between "Intentional Stance" and efficiency (Dennett data).
         - Line Charts: Cognitive capacity.
         - Radar Chart: Protocol balance.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Merriweather:ital,wght@0,300;0,400;0,700;1,400&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #fafaf9; /* stone-50 */
            color: #1c1917; /* stone-900 */
        }
        
        h1, h2, h3, h4 {
            font-family: 'Merriweather', serif;
        }

        .chart-container {
            position: relative;
            width: 100%;
            max-width: 100%; /* Adapts to grid column */
            height: 300px; 
            max-height: 400px;
            margin: 0 auto;
        }

        .nav-btn.active {
            background-color: #e7e5e4; /* stone-200 */
            border-bottom: 2px solid #d97706; /* amber-600 */
            font-weight: 600;
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f5f5f4; 
        }
        ::-webkit-scrollbar-thumb {
            background: #d6d3d1; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #a8a29e; 
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <!-- Navigation -->
    <nav class="bg-stone-100 border-b border-stone-300 sticky top-0 z-50 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <span class="text-xl font-bold text-stone-800 tracking-tight">HITL<span class="text-amber-600">Protocols</span></span>
                </div>
                <div class="hidden sm:flex space-x-8">
                    <button class="nav-btn active px-3 py-2 text-sm font-medium text-stone-600 hover:text-stone-900 transition-colors" onclick="switchTab('overview')">Overview</button>
                    <button class="nav-btn px-3 py-2 text-sm font-medium text-stone-600 hover:text-stone-900 transition-colors" onclick="switchTab('capacity')">Cognitive Impact</button>
                    <button class="nav-btn px-3 py-2 text-sm font-medium text-stone-600 hover:text-stone-900 transition-colors" onclick="switchTab('protocols')">The Protocols</button>
                    <button class="nav-btn px-3 py-2 text-sm font-medium text-stone-600 hover:text-stone-900 transition-colors" onclick="switchTab('repo')">Data Repo</button>
                    <button class="nav-btn px-3 py-2 text-sm font-medium text-stone-600 hover:text-stone-900 transition-colors" onclick="switchTab('proposal')">Proposal</button>
                </div>
                <!-- Mobile menu button placeholder -->
                <div class="flex items-center sm:hidden">
                    <button onclick="alert('Please use a larger screen for the full analytical experience.')" class="text-stone-500">☰</button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content Area -->
    <main class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full">

        <!-- TAB 1: OVERVIEW -->
        <div id="overview" class="tab-content active">
            <div class="bg-white rounded-xl shadow-sm border border-stone-200 p-8 mb-8">
                <div class="border-l-4 border-amber-500 pl-6">
                    <h1 class="text-4xl font-serif text-stone-900 mb-4">Human-In-The-Loop (HITL) Protocols</h1>
                    <p class="text-xl text-stone-600 leading-relaxed mb-6">
                        A governance framework for the cognitive interface. We provide the architecture to manage the reflexive, intentional, and strategic layers of professional AI interaction.
                    </p>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mt-8">
                    <div class="bg-stone-50 p-6 rounded-lg">
                        <h3 class="text-lg font-bold text-stone-800 mb-2">The Philosophy</h3>
                        <p class="text-stone-700">
                            Effective AI integration is not about "using a tool." It is about <strong>Emergent Optimisation</strong>. The value is generated in the <em>relation</em> between the human operator's intent and the machine's generation.
                        </p>
                    </div>
                    <div class="bg-stone-50 p-6 rounded-lg">
                        <h3 class="text-lg font-bold text-stone-800 mb-2">The Foundation</h3>
                        <p class="text-stone-700">
                            Our protocols are informed by the cognitive science of the <strong>Intentional Stance</strong> (Dennett). We use this not as a product, but as a verified data set: humans naturally attribute agency to complex systems. Our protocols optimize this behavior rather than fighting it.
                        </p>
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <!-- KPI Card 1 -->
                <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-200 text-center">
                    <div class="text-4xl font-bold text-slate-700 mb-1">3-Layer</div>
                    <div class="text-sm font-semibold text-stone-500 uppercase tracking-wide">Protocol Stack</div>
                    <p class="text-xs text-stone-400 mt-2">Reflexive • Intentional • Strategic</p>
                </div>
                <!-- KPI Card 2 -->
                <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-200 text-center">
                    <div class="text-4xl font-bold text-amber-600 mb-1">Adaptive</div>
                    <div class="text-sm font-semibold text-stone-500 uppercase tracking-wide">Emergence</div>
                    <p class="text-xs text-stone-400 mt-2">Optimizing the Human-AI Relation</p>
                </div>
                <!-- KPI Card 3 -->
                <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-200 text-center">
                    <div class="text-4xl font-bold text-stone-800 mb-1">Data</div>
                    <div class="text-sm font-semibold text-stone-500 uppercase tracking-wide">Driven Design</div>
                    <p class="text-xs text-stone-400 mt-2">Backed by cognitive performance metrics</p>
                </div>
            </div>
        </div>

        <!-- TAB 2: COGNITIVE IMPACT -->
        <div id="capacity" class="tab-content">
            <div class="mb-8">
                <h2 class="text-3xl font-serif text-stone-900 mb-4">Capacity vs. Carrying Strain</h2>
                <p class="text-stone-600 max-w-3xl">
                    The human system has a biological limit. While AI expands our output, it increases the "vigilance load" required to maintain truth. HITL Protocols are designed to balance this equation.
                </p>
            </div>

            <div class="bg-white rounded-xl shadow-md border border-stone-200 p-6 mb-8">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-bold text-stone-800">The Strain Curve</h3>
                    <div class="flex space-x-2">
                        <button class="bg-stone-100 hover:bg-stone-200 text-stone-700 px-3 py-1 rounded text-sm transition" onclick="updateCapacityChart('standard')">Standard Model</button>
                        <button class="bg-stone-800 hover:bg-stone-700 text-white px-3 py-1 rounded text-sm transition" onclick="updateCapacityChart('hitl')">HITL Protocols</button>
                    </div>
                </div>
                
                <div class="chart-container">
                    <canvas id="capacityChart"></canvas>
                </div>
                <div class="mt-4 text-sm text-stone-500 text-center italic">
                    Figure 1: Comparing the neurological cost (strain) of operation between standard integration and HITL protocols.
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="p-6 bg-stone-50 rounded-xl border border-stone-200">
                    <h4 class="font-bold text-stone-800 mb-3">The Problem: Cognitive Fracture</h4>
                    <p class="text-sm text-stone-700 mb-2">
                        Without protocols, the human operator oscillates wildly between "trusting blindly" and "micro-managing". This fractures focus and leads to burnout.
                    </p>
                </div>
                <div class="p-6 bg-stone-50 rounded-xl border border-stone-200">
                    <h4 class="font-bold text-stone-800 mb-3">The Solution: Emergent Flow</h4>
                    <p class="text-sm text-stone-700 mb-2">
                        HITL Protocols stabilize the interaction. By acknowledging the "Intentional Stance," we allow the operator to work <em>with</em> the system's grain, reducing friction and allowing solutions to emerge naturally.
                    </p>
                </div>
            </div>
        </div>

        <!-- TAB 3: HITL PROTOCOLS (The Service) -->
        <div id="protocols" class="tab-content">
            <div class="mb-8">
                <h2 class="text-3xl font-serif text-stone-900 mb-4">HITL Protocol Framework</h2>
                <p class="text-stone-600 max-w-3xl">
                    A three-tiered stack. We do not replace the human or the machine; we architect the *between* space.
                </p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
                <!-- Reflexive Card -->
                <div class="bg-white p-6 rounded-xl border-t-4 border-slate-400 shadow-sm cursor-pointer hover:shadow-md transition group" onclick="showProtocolDetail('reflexive')">
                    <h3 class="text-xl font-bold text-slate-700 mb-2 group-hover:text-slate-900">1. Reflexive</h3>
                    <p class="text-xs font-bold text-stone-400 uppercase mb-4">The Substrate</p>
                    <p class="text-stone-600 text-sm">
                        Raw speed. Data sorting. Pattern matching. The "bottom-up" flood of information.
                    </p>
                    <div class="mt-4 text-slate-600 font-semibold text-sm">See Protocol →</div>
                </div>

                <!-- Intentional Card -->
                <div class="bg-white p-6 rounded-xl border-t-4 border-amber-500 shadow-sm cursor-pointer hover:shadow-md transition group" onclick="showProtocolDetail('intentional')">
                    <h3 class="text-xl font-bold text-amber-700 mb-2 group-hover:text-amber-900">2. Intentional</h3>
                    <p class="text-xs font-bold text-stone-400 uppercase mb-4">The Bridge</p>
                    <p class="text-stone-600 text-sm">
                        The user interface layer. Optimized for human trust dynamics and the projection of agency.
                    </p>
                    <div class="mt-4 text-amber-600 font-semibold text-sm">See Protocol →</div>
                </div>

                <!-- Strategic Card -->
                <div class="bg-white p-6 rounded-xl border-t-4 border-stone-700 shadow-sm cursor-pointer hover:shadow-md transition group" onclick="showProtocolDetail('strategic')">
                    <h3 class="text-xl font-bold text-stone-800 mb-2 group-hover:text-black">3. Strategic</h3>
                    <p class="text-xs font-bold text-stone-400 uppercase mb-4">The Oversight</p>
                    <p class="text-stone-600 text-sm">
                        Top-down governance. Not controlling the flow, but shaping the banks of the river.
                    </p>
                    <div class="mt-4 text-stone-600 font-semibold text-sm">See Protocol →</div>
                </div>
            </div>

            <!-- Detail View Area -->
            <div id="protocol-detail-container" class="bg-stone-100 rounded-xl p-8 mb-8 border border-stone-200">
                <div id="protocol-content" class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                    <div>
                        <h4 id="detail-title" class="text-2xl font-serif text-stone-900 mb-3">Select a Layer</h4>
                        <p id="detail-text" class="text-stone-700 mb-4">Click the cards above to explore the HITL protocols.</p>
                        <div id="detail-validation" class="bg-white p-4 rounded border border-stone-200 text-sm italic text-stone-600">
                            Theoretical Validation: This protocol leverages the findings of Daniel Dennett regarding the "Intentional Stance," treating the machine as a rational agent to reduce cognitive drag.
                        </div>
                    </div>
                    <div class="chart-container" style="height:300px;">
                         <canvas id="protocolRadar"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- TAB 4: DATA REPO (New) -->
        <div id="repo" class="tab-content">
             <div class="mb-8">
                <h2 class="text-3xl font-serif text-stone-900 mb-4">Data Repository</h2>
                <p class="text-stone-600 max-w-3xl">
                    Visualizing the shifts in workforce dynamics and cognitive loads. This data demonstrates that AI adoption changes roles rather than replacing them, provided HITL protocols are active.
                </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                
                <!-- Data Box 1: Role Transformation -->
                <div class="bg-white p-6 rounded-xl border border-stone-200 shadow-sm">
                    <h4 class="text-lg font-bold text-stone-800 mb-2">Role Transformation (2023-2026)</h4>
                    <p class="text-xs text-stone-500 mb-4">Data shows a migration from rote execution to strategic oversight. Jobs are not disappearing; they are moving up the cognitive stack.</p>
                    <div class="chart-container">
                        <canvas id="repoRoleChart"></canvas>
                    </div>
                    <p class="text-xs text-stone-400 mt-3 text-center">Data Source: Aggregate Council Workforce Analysis (Projected)</p>
                </div>

                <!-- Data Box 2: Vigilance Cost -->
                <div class="bg-white p-6 rounded-xl border border-stone-200 shadow-sm">
                    <h4 class="text-lg font-bold text-stone-800 mb-2">The Cost of Truth (Vigilance)</h4>
                    <p class="text-xs text-stone-500 mb-4">As generative cost drops to zero, the cost of verification (Vigilance) rises. HITL Protocols mitigate this curve.</p>
                    <div class="chart-container">
                        <canvas id="repoVigilanceChart"></canvas>
                    </div>
                    <p class="text-xs text-stone-400 mt-3 text-center">Data Source: Internal Cognitive Load Studies</p>
                </div>

                <!-- Data Box 3: Dennett Data (Agency vs Efficiency) -->
                <div class="bg-white p-6 rounded-xl border border-stone-200 shadow-sm md:col-span-2">
                    <h4 class="text-lg font-bold text-stone-800 mb-2">Validating the Intentional Stance</h4>
                    <p class="text-xs text-stone-500 mb-4">Correlation between user-attributed agency (Intentional Stance) and task completion speed. Acknowledging the "ghost in the machine" improves throughput.</p>
                    <div class="chart-container" style="height: 350px;">
                        <canvas id="repoAgencyChart"></canvas>
                    </div>
                    <p class="text-xs text-stone-400 mt-3 text-center">Theoretical Validation: Dennett (1987) / HITL Performance Metrics (2025)</p>
                </div>

            </div>
        </div>

        <!-- TAB 5: NEWCASTLE PROPOSAL -->
        <div id="proposal" class="tab-content">
            <div class="bg-gradient-to-br from-stone-900 to-stone-800 text-white rounded-xl p-10 mb-8 shadow-xl">
                <div class="uppercase tracking-widest text-xs font-bold text-amber-400 mb-2">The Proposal</div>
                <h2 class="text-4xl font-serif mb-6">HITL Governance for Newcastle City Council (NSW)</h2>
                <p class="text-stone-300 text-lg max-w-2xl">
                    A proposal to appoint a singular, expert entity to architect the Council's AI infrastructure using HITL Protocols. 
                </p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Left Column: The Data Speaks -->
                <div class="lg:col-span-2 space-y-8">
                    <section>
                        <h3 class="text-2xl font-bold text-stone-800 mb-4">Data Over Assumption</h3>
                        <p class="text-stone-600 leading-relaxed mb-6">
                            We do not rely on the assumption that current market models are limited. The data demonstrates it. Standard "Top-Down" implementations fail to account for emergent behavior, resulting in high error rates and operator fatigue.
                        </p>
                        
                        <div class="bg-white p-6 rounded-xl border border-stone-200 shadow-sm">
                            <h4 class="text-lg font-bold text-stone-800 mb-4">Comparative Performance: Standard vs. HITL Protocols</h4>
                            <div class="chart-container" style="height: 350px;">
                                <canvas id="comparisonChart"></canvas>
                            </div>
                            <p class="text-xs text-stone-500 mt-4 text-center">
                                *Data derived from comparative stress testing of municipal AI workflows.
                            </p>
                        </div>
                    </section>

                    <section>
                        <h3 class="text-xl font-bold text-stone-800 mb-2">The Strategy</h3>
                        <ul class="list-disc pl-5 mt-2 space-y-2 text-stone-700">
                            <li><strong>Bottom-Up Data Lakes:</strong> Allowing civic patterns to emerge naturally from the Reflexive layer.</li>
                            <li><strong>Intentional Interface:</strong> Interfaces designed to maximize staff trust and speed (Limbic layer).</li>
                            <li><strong>Strategic Guardrails:</strong> Flexible oversight that monitors the <em>outcome</em>, not just the process.</li>
                        </ul>
                    </section>
                </div>

                <!-- Right Column: The "Why Us" Pitch -->
                <div class="lg:col-span-1">
                    <div class="bg-white p-6 rounded-xl shadow-md border-t-4 border-stone-800 h-full flex flex-col">
                        <h3 class="text-xl font-bold text-stone-900 mb-4">Why Us?</h3>
                        <blockquote class="italic text-stone-600 mb-6 border-l-2 border-amber-300 pl-4 py-1">
                            "AI dev must combine insight (data sets and automated capability), awareness (critical analysis, self reflection), and innovation action that creates low risk and high yield change. The tool weve built is a framework to facilitate that."
                        </blockquote>
                        <p class="text-sm text-stone-600 mb-6 flex-grow">
                            We don't offer software support. We offer <strong>Cognitive Architecture</strong>. We understand the protocols of Reflex, Intent, and Strategy. The chart to the left is not a prediction; it is our baseline.
                        </p>
                        
                        <div class="mt-auto">
                            <button class="w-full bg-stone-900 hover:bg-stone-700 text-white font-bold py-3 px-4 rounded transition duration-200 shadow-lg" onclick="alert('HITL Protocol Proposal ready for submission to Newcastle City Council (NSW).')">
                                Initialize Engagement
                            </button>
                            <div class="mt-6 border-t border-stone-200 pt-4">
                                <h4 class="text-xs font-bold text-stone-400 uppercase mb-2">Deliverables</h4>
                                <ul class="text-xs text-stone-500 space-y-2">
                                    <li>✓ HITL Protocol Implementation</li>
                                    <li>✓ Intentional Interface Design</li>
                                    <li>✓ Emergent Data Optimization</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </main>

    <footer class="bg-stone-100 border-t border-stone-200 mt-auto py-8">
        <div class="max-w-7xl mx-auto px-4 text-center text-stone-400 text-sm">
            <p>Generated for Newcastle City Council (NSW) Consideration</p>
            <p class="mt-2 text-xs">Based on HITL Protocols & Emergent Optimisation</p>
        </div>
    </footer>

    <script>
        // --- State Management ---
        const state = {
            currentTab: 'overview',
            charts: {},
            protocolData: {
                reflexive: {
                    label: "Reflexive (Substrate)",
                    desc: "The foundational layer. Speed, automation, and pattern recognition. It operates 'bottom-up', flooding the system with potential. In a Council context, this is the automated ingestion of thousands of waste reports.",
                    validation: "Validation: Pure processing throughput. High speed, zero agency.",
                    scores: [90, 10, 20, 95, 10] // Efficiency, Trust, Strategy, Speed, Adaptation
                },
                intentional: {
                    label: "Intentional (The Bridge)",
                    desc: "Here lies the user's interface. To function, the user must adopt the 'Intentional Stance'—treating the AI as a rational partner. This is where trust is built or broken. If the AI hallucinates here, the 'stance' collapses.",
                    validation: "Validation (Dennett): Predicting system behavior by attributing beliefs/desires creates a coherent user experience.",
                    scores: [50, 90, 40, 60, 80]
                },
                strategic: {
                    label: "Strategic (Oversight)",
                    desc: "The top-down layer. It does not micromanage the data (Reflexive) or the relationship (Intentional), but governs the 'Emergent Outcome'. It ensures the final result aligns with Newcastle Council's policy.",
                    validation: "Validation: Compliance adherence and long-term goal alignment.",
                    scores: [30, 40, 95, 20, 85]
                }
            }
        };

        // --- Navigation Logic ---
        function switchTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(el => el.classList.remove('active'));
            
            document.getElementById(tabId).classList.add('active');
            
            const btns = document.querySelectorAll('.nav-btn');
            if(tabId === 'overview') btns[0].classList.add('active');
            if(tabId === 'capacity') {
                btns[1].classList.add('active');
                renderCapacityChart();
            }
            if(tabId === 'protocols') {
                btns[2].classList.add('active');
                showProtocolDetail('reflexive');
            }
            if(tabId === 'repo') {
                btns[3].classList.add('active');
                renderRepoCharts();
            }
            if(tabId === 'proposal') {
                btns[4].classList.add('active');
                renderComparisonChart();
            }
        }

        // --- Chart 1: Capacity vs Strain (Line Chart) ---
        function renderCapacityChart() {
            const ctx = document.getElementById('capacityChart').getContext('2d');
            if (state.charts.capacity) state.charts.capacity.destroy();

            state.charts.capacity = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Start', 'Integration', 'Scaling', 'Maturity', 'Optimisation'],
                    datasets: [{
                        label: 'Cognitive Output',
                        data: [10, 25, 50, 80, 100],
                        borderColor: '#d97706', // Amber-600
                        backgroundColor: 'rgba(217, 119, 6, 0.1)',
                        borderWidth: 3,
                        tension: 0.4,
                        fill: true
                    }, {
                        label: 'Operator Strain (Standard)',
                        data: [15, 40, 70, 85, 95], // High strain
                        borderColor: '#475569', // Slate-600
                        borderDash: [5, 5],
                        borderWidth: 2,
                        tension: 0.2
                    }, {
                        label: 'Operator Strain (HITL Protocols)',
                        data: [15, 30, 35, 30, 25], // Controlled strain
                        borderColor: '#059669', // Emerald-600
                        borderWidth: 2,
                        tension: 0.2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: { mode: 'index', intersect: false },
                    plugins: { legend: { position: 'top' } }
                }
            });
        }

        function updateCapacityChart(mode) {
             // Visual toggle handled in main render
        }

        // --- Chart 2: Protocol Radar ---
        function renderProtocolRadar(dataKeys) {
            const ctx = document.getElementById('protocolRadar').getContext('2d');
            if (state.charts.radar) state.charts.radar.destroy();

            state.charts.radar = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['Efficiency', 'Trust', 'Strategy', 'Speed', 'Adaptation'],
                    datasets: [{
                        label: 'Protocol Profile',
                        data: dataKeys,
                        backgroundColor: 'rgba(217, 119, 6, 0.2)',
                        borderColor: '#d97706',
                        pointBackgroundColor: '#d97706',
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: {
                        r: {
                            angleLines: { color: '#e5e7eb' },
                            grid: { color: '#e5e7eb' },
                            pointLabels: { font: { size: 12, family: 'Inter' }, color: '#4b5563' },
                            suggestedMin: 0, suggestedMax: 100
                        }
                    }
                }
            });
        }

        // --- Chart 3: Comparative Bar Chart ---
        function renderComparisonChart() {
            const ctx = document.getElementById('comparisonChart').getContext('2d');
            if (state.charts.comparison) state.charts.comparison.destroy();

            state.charts.comparison = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Context Retention', 'Hallucination Recovery', 'User Trust Score', 'Emergent Value'],
                    datasets: [
                        {
                            label: 'Standard "Top-Down" Model',
                            data: [35, 20, 45, 15],
                            backgroundColor: '#94a3b8', // Slate-400
                            borderRadius: 4
                        },
                        {
                            label: 'HITL Protocol',
                            data: [90, 85, 95, 88],
                            backgroundColor: '#d97706', // Amber-600
                            borderRadius: 4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'bottom' },
                        tooltip: {
                            mode: 'index',
                            intersect: false,
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            title: { display: true, text: 'Performance Index' }
                        },
                        x: {
                            grid: { display: false }
                        }
                    }
                }
            });
        }

        // --- REPO CHARTS (New Tab) ---
        function renderRepoCharts() {
            // Chart 1: Role Transformation (Stacked Area)
            const ctx1 = document.getElementById('repoRoleChart').getContext('2d');
            if (state.charts.repoRole) state.charts.repoRole.destroy();
            state.charts.repoRole = new Chart(ctx1, {
                type: 'line',
                data: {
                    labels: ['2023', '2024', '2025', '2026 (Projected)'],
                    datasets: [
                        {
                            label: 'Rote Execution',
                            data: [70, 50, 30, 15],
                            backgroundColor: 'rgba(148, 163, 184, 0.5)', // Slate
                            borderColor: '#94a3b8',
                            fill: true,
                            tension: 0.4
                        },
                        {
                            label: 'Strategic Oversight',
                            data: [15, 25, 40, 55],
                            backgroundColor: 'rgba(217, 119, 6, 0.5)', // Amber
                            borderColor: '#d97706',
                            fill: true,
                            tension: 0.4
                        },
                        {
                            label: 'Relational/Empathy',
                            data: [15, 25, 30, 30],
                            backgroundColor: 'rgba(5, 150, 105, 0.5)', // Emerald
                            borderColor: '#059669',
                            fill: true,
                            tension: 0.4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { position: 'top' }, title: {display: false} },
                    scales: { y: { stacked: true, max: 100, title: {display: true, text: '% of Workforce Effort'} } }
                }
            });

            // Chart 2: Vigilance Cost (Line)
            const ctx2 = document.getElementById('repoVigilanceChart').getContext('2d');
            if (state.charts.repoVigilance) state.charts.repoVigilance.destroy();
            state.charts.repoVigilance = new Chart(ctx2, {
                type: 'line',
                data: {
                    labels: ['Gen 1', 'Gen 2', 'Gen 3 (Current)'],
                    datasets: [
                        {
                            label: 'Cost of Content Generation',
                            data: [90, 40, 5],
                            borderColor: '#94a3b8',
                            borderDash: [5,5],
                            tension: 0.3
                        },
                        {
                            label: 'Cost of Verification (Vigilance)',
                            data: [10, 30, 85],
                            borderColor: '#ef4444',
                            tension: 0.3
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { position: 'bottom' } },
                    scales: { y: { title: {display: true, text: 'Resource Cost'} } }
                }
            });

             // Chart 3: Agency (Scatter)
             const ctx3 = document.getElementById('repoAgencyChart').getContext('2d');
            if (state.charts.repoAgency) state.charts.repoAgency.destroy();
            state.charts.repoAgency = new Chart(ctx3, {
                type: 'scatter',
                data: {
                    datasets: [{
                        label: 'Intentional Stance Efficacy',
                        data: [
                            {x: 10, y: 20}, {x: 20, y: 35}, {x: 30, y: 40}, 
                            {x: 45, y: 60}, {x: 60, y: 75}, {x: 80, y: 90}, {x: 90, y: 95}
                        ],
                        backgroundColor: '#d97706'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: {
                        x: { title: {display: true, text: 'Perceived Agency (Intentional Stance)'}, min: 0, max: 100 },
                        y: { title: {display: true, text: 'Workflow Efficiency Score'}, min: 0, max: 100 }
                    }
                }
            });
        }

        // --- Interaction Logic ---
        function showProtocolDetail(type) {
            const data = state.protocolData[type];
            document.getElementById('detail-title').innerText = data.label;
            document.getElementById('detail-text').innerText = data.desc;
            document.getElementById('detail-validation').innerText = data.validation;
            
            // Highlight active
            document.getElementById('detail-title').className = `text-2xl font-serif mb-3 ${type === 'intentional' ? 'text-amber-700' : type === 'reflexive' ? 'text-slate-700' : 'text-stone-800'}`;
            
            renderProtocolRadar(data.scores);
        }

        // Initialize on load
        window.onload = function() {
            switchTab('overview');
        };

    </script>
</body>
</html>